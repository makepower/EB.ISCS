function getTabIndex(n){if(n==="content-main"||n==="content-edit")return 0;return undefined===WYATT.infoTabIndex?WYATT.infoTabIndex=0:(WYATT.infoTabIndex++,WYATT.infoTabIndex=WYATT.infoTabIndex%15),WYATT.infoTabIndex}var WYATT={};$(function(){function n(n){var t=0;return $(n).each(function(){t+=$(this).outerWidth(!0)}),t}function i(n){var t={},i=n.substr(n.indexOf("?")+1).replace(/\+/g," "),r=i.split("&");return $.each(r,function(){var n=this.split("=");n[1]&&(n[1]=n[1].replace("+"," "),n[1]==="false"&&(n[1]=!1),n[1]==="true"&&(n[1]=!0),t[n[0]]=n[1])}),t}function r(){var o=!0,n,f,r,e;return(n=decodeURIComponent(window.location.hash.replace("#","")),f=i(n),n==undefined||$.trim(n).length==0)?!1:(r=$("#J_mainTabs div.page-tabs-content a.J_menuTab."+f.content+'[data-id="#'+n+'"]'),e=$("#J_mainContent .J_content."+f.content+'[data-id="#'+n+'"]'),r.length&&($(r).hasClass("active")||($(r).addClass("active").siblings(".J_menuTab").removeClass("active"),t(r))),(e.length||e.is("iframe"))&&($(e).show().siblings(".J_content").hide(),o=!1),(!r.length||!e.length||o||f.refresh)&&(u(n,f),t($("#J_mainTabs .J_menuTab.active"))),!1)}function u(n,t){var f;n=n.replace("#","");var r=getTabIndex(t.content),u=$("#J_mainTabs div.page-tabs-content"),e=u.find("a.J_menuTab."+t.content+'[data-index="'+r+'"]'),i=$("#J_mainContent div.J_content."+t.content+'[data-index="'+r+'"]'),o,s;o='<a href="javascript:;" class="active J_menuTab"><\/a>';f=t.content==="content-main"?"":'<i class="fa fa-times-circle"><\/i>';t.content!="content-main"&&t.content!="content-edit"&&(t.content="content-info");$(u).find("a.J_menuTab").removeClass("active");$(e).length<=0?($(u).append(o),$(u).find("a.J_menuTab.active").addClass(t.content).attr("data-index",r).attr("data-id","#"+n).text(t.title).append(f)):$(e).addClass("active").attr("data-id","#"+n).text(t.title).append(f);s=t.isExtUrl||t.iframe?'<iframe class="J_content active" width="100%" height="100%" frameborder="0" src="'+n+'" seamless><\/iframe>':'<div class="J_content active"><\/div>';$("#J_mainContent .J_content").removeClass("active").hide();$(i).length<=0?($("#J_mainContent").append(s),i=$("#J_mainContent").find(".J_content.active").addClass(t.content).attr("data-index",r).attr("data-id","#"+n).attr("data-title",t.title)):$(i).addClass("active").attr("data-id","#"+n).attr("data-title",t.title);t.isExtUrl||t.iframe?$(i).show():$(i).load(n.replace("#","")).show()}function t(t){var f=n($(t).prevAll()),e=n($(t).nextAll()),o=n($("#J_mainTabs").children().not(".J_menuTabs")),r=$("#J_mainTabs").outerWidth(!0)-o,i=0,u;if($("#J_mainTabs .page-tabs-content").outerWidth()<r)i=0;else if(e<=r-$(t).outerWidth(!0)-$(t).next().outerWidth(!0)){if(r-$(t).next().outerWidth(!0)>e)for(i=f,u=t;i-$(u).outerWidth()>$("#J_mainTabs .page-tabs-content").outerWidth()-r;)i-=$(u).prev().outerWidth(),u=$(u).prev()}else f>r-$(t).outerWidth(!0)-$(t).prev().outerWidth(!0)&&(i=f-$(t).prev().outerWidth(!0));$("#J_mainTabs .page-tabs-content").animate({marginLeft:0-i+"px"},"fast")}function f(){var f=Math.abs(parseInt($("#J_mainTabs .page-tabs-content").css("margin-left"))),e=n($("#J_mainTabs").children().not(".J_menuTabs")),r=$("#J_mainTabs").outerWidth(!0)-e,u=0,t,i;if($("#J_mainTabs .page-tabs-content").width()<r)return!1;for(t=$("#J_mainTabs .J_menuTab:first"),i=0;i+$(t).outerWidth(!0)<=f;)i+=$(t).outerWidth(!0),t=$(t).next();if(i=0,n($(t).prevAll())>r){while(i+$(t).outerWidth(!0)<r&&t.length>0)i+=$(t).outerWidth(!0),t=$(t).prev();u=n($(t).prevAll())}$("#J_mainTabs .page-tabs-content").animate({marginLeft:0-u+"px"},"fast")}function e(){var f=Math.abs(parseInt($("#J_mainTabs .page-tabs-content").css("margin-left"))),e=n($("#J_mainTabs").children().not(".J_menuTabs")),u=$("#J_mainTabs").outerWidth(!0)-e,r=0,t,i;if($("#J_mainTabs .page-tabs-content").width()<u)return!1;for(t=$("#J_mainTabs .J_menuTab:first"),i=0;i+$(t).outerWidth(!0)<=f;)i+=$(t).outerWidth(!0),t=$(t).next();for(i=0;i+$(t).outerWidth(!0)<u&&t.length>0;)i+=$(t).outerWidth(!0),t=$(t).next();r=n($(t).prevAll());r>0&&$("#J_mainTabs .page-tabs-content").animate({marginLeft:0-r+"px"},"fast")}function o(){var n=$(this).parents(".J_menuTab").attr("data-id");return $(this).parents(".J_menuTab").hasClass("active")&&($(this).parents(".J_menuTab").next(".J_menuTab").size()?$(this).parents(".J_menuTab").next(".J_menuTab:eq(0)").addClass("active"):$(this).parents(".J_menuTab").prev(".J_menuTab").size()&&$(this).parents(".J_menuTab").prev(".J_menuTab:last").addClass("active")),$(this).parents(".J_menuTab").remove(),$("#J_mainContent .J_content").each(function(){if($(this).attr("data-id")==n)return $(this).remove(),!1}),window.location.hash=$("#J_mainTabs .J_menuTab.active").attr("data-id"),!1}function s(){$("#J_mainTabs .page-tabs-content").children("[data-id]").not(":first").not(".active").not(".content-edit").each(function(){$('.J_content[data-id="'+$(this).attr("data-id")+'"]').remove();$(this).remove()});$("#J_mainTabs .page-tabs-content").css("margin-left","0")}function h(){t($("#J_mainTabs .J_menuTab.active"))}function c(){$(this).hasClass("active")||(window.location.hash=encodeURI($(this).attr("data-id")))}function l(n){var t=document.createElement("a");return t.href=n,t.href}function a(n){var i=l(n),t=window.location.protocol+"//"+window.location.host+"/",r=i.substr(0,t.length);return!(r===t)}function v(n){var i=n.split(" "),t="";return $.each(i,function(n,i){$.trim(i)&&(t+=$.trim(i)+" ")}),$.trim(t)}$(window).on("hashchange load",function(){window.location.hash.substr(1)||(window.location.hash=$('#J_mainTabs div.page-tabs-content a.content-main[data-index="0"]').attr("data-id"));r()});$(".J_menuItem").on("click",function(){var t=$(this).attr("href"),i,n;return i=t.replace("#",""),n={content:$(this).attr("data-content"),title:v($(this).text()),iframe:$(this).attr("data-iframe"),isExtUrl:a(t)},n.isExtUrl&&!n.iframe&&(n.content="content-info"),window.location.hash=decodeURI("#"+i+"?"+$.param(n)),!1});$("#J_mainTabs .J_menuTabs").on("click",".J_menuTab i",o);$("#J_mainTabs .J_tabCloseOther").on("click",s);$("#J_mainTabs .J_tabShowActive").on("click",h);$("#J_mainTabs .J_menuTabs").on("click",".J_menuTab",c);$("#J_mainTabs .J_tabLeft").on("click",f);$("#J_mainTabs .J_tabRight").on("click",e);$("#J_mainTabs .J_tabCloseAll").on("click",function(){$("#J_mainTabs .page-tabs-content").children("[data-id]").not(":first").not(".content-edit").each(function(){$('.J_content[data-id="'+$(this).attr("data-id")+'"]').remove();$(this).remove()});$("#J_mainTabs .page-tabs-content").children("[data-id]:first").each(function(){window.location.hash=$(this).attr("data-id")})})});